<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Matrix Help</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="../css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../css/dashboard.css"/>
    <link rel="stylesheet" href="../css/bootstrapValidator.css"/>
    <link rel="stylesheet" href="../css/style.css">


    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/angular.min.js"></script>
    <script type="text/javascript" src="../js/angular-route.min.js"></script>
    <script type="text/javascript" src="../js/angular-animate.js"></script>
    <script type="text/javascript" src="../js/angular-ui-router.min.js"></script>
    <script type="text/javascript" src="../js/ocLazyLoad.js"></script>


</head>
<body>
<div class="main-container ng-scope flex" flex="" data-ui-view="" style=""><div class="main-container app-layout ng-scope"><section class="main-section"><header layout="row" layout-align="end start" class="layout-align-end-start layout-row"><div class="info flex" flex=""><h2>日志查询</h2></div></header><div class="main-content"><form name="staticForm" class="ng-pristine ng-invalid ng-invalid-required ng-valid-date ng-valid-time ng-valid-maxlength"><div layout="row" class="layout-row"><div layout="row" flex="30" layout-align="start center" class="form-group form-group-select layout-align-end-start layout-align-start-center layout-row flex-30"><label>集群名 <span class="text-danger">*</span></label><div flex="" flex-offset="5" layout="column" class="layout-column flex-offset-5 flex"><md-input-container class=""><md-select data-ng-model="clusterId" aria-label="clusters-select" data-required="required" class="ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" tabindex="0" aria-disabled="false" role="listbox" aria-expanded="false" aria-multiselectable="false" id="select_4" aria-owns="select_container_5" aria-required="true" aria-invalid="true"><md-select-value class="md-select-value md-select-placeholder" id="select_value_label_2"><span></span><span class="md-select-icon" aria-hidden="true"></span></md-select-value><div class="md-select-menu-container" aria-hidden="true" id="select_container_5"><md-select-menu><md-content><!-- ngRepeat: cluster in clusters --></md-content></md-select-menu></div></md-select></md-input-container></div></div><div layout="row" flex="30" flex-offset="5" layout-align="start center" class="form-group form-group-select layout-align-end-start layout-align-start-center layout-row flex-offset-5 flex-30"><label>应用名<span class="text-danger">*</span></label><div flex="" flex-offset="5" layout="column" class="layout-column flex-offset-5 flex"><md-input-container class=""><md-select data-ng-model="app" aria-label="clusters-select" data-required="required" ng-change="getNodePorts(app.id,clusterId)" data-md-container-class="selectdemoSelectHeader" class="ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required" tabindex="0" aria-disabled="false" role="listbox" aria-expanded="false" aria-multiselectable="false" id="select_6" aria-owns="select_container_7" aria-required="true" aria-invalid="true"><md-select-value class="md-select-value md-select-placeholder" id="select_value_label_3"><span></span><span class="md-select-icon" aria-hidden="true"></span></md-select-value><div class="md-select-menu-container selectdemoSelectHeader" aria-hidden="true" id="select_container_7"><md-select-menu><md-content><md-select-header class="demo-select-header"><input ng-model="searchKey" type="search" id="searchKey" aria-label="search app name" class="demo-header-searchbox ng-pristine ng-untouched ng-valid md-input ng-empty" aria-invalid="false"><div class="md-errors-spacer"></div></md-select-header><!-- ngRepeat: option in options | filter: {name: searchKey} --></md-content></md-select-menu></div></md-select></md-input-container></div></div><div layout="row" flex="30" flex-offset="5" layout-align="start center" class="form-group form-group-input layout-align-start-center layout-row flex-offset-5 flex-30"><label>关键字</label><div flex="" flex-offset="5" layout="column" class="layout-column flex-offset-5 flex"><input type="text" class="form-input ng-pristine ng-untouched ng-valid ng-empty" data-ng-model="logSearchKey" aria-invalid="false"></div></div></div><div layout="row" class="layout-row"><div layout="row" flex="30" layout-align="start center" class="form-group form-group-select layout-align-end-start layout-align-start-center layout-row flex-30"><label>实例名</label><div flex="" flex-offset="5" layout="column" class="layout-column flex-offset-5 flex"><isteven-multi-select input-model="inputNodesInfo" output-model="nodeId" button-label="name" item-label="name" tick-property="ticked" helper-elements="all none filter" max-height="200px" translation="multiConfig" max-labels="1" class="ng-isolate-scope"><span class="multiSelect inlineBlock"><button id="" type="button" ng-click="toggleCheckboxes( $event ); refreshSelectedItems(); refreshButton(); prepareGrouping; prepareIndex();" ng-bind-html="varButtonLabel" ng-disabled="disable-button" class="ng-binding">ALL<span class="caret"></span></button><div class="checkboxLayer"><!-- ngIf: helperStatus.filter || helperStatus.all || helperStatus.none || helperStatus.reset --><div class="helperContainer ng-scope" ng-if="helperStatus.filter || helperStatus.all || helperStatus.none || helperStatus.reset "><!-- ngIf: helperStatus.all || helperStatus.none || helperStatus.reset --><div class="line ng-scope" ng-if="helperStatus.all || helperStatus.none || helperStatus.reset "><!-- ngIf: helperStatus.all --><button type="button" class="helperButton ng-binding ng-scope" ng-disabled="isDisabled" ng-if="helperStatus.all" ng-click="select( 'all', $event );" ng-bind-html="lang.selectAll">✓&nbsp;&nbsp;全部选择</button><!-- end ngIf: helperStatus.all --><!-- ngIf: helperStatus.none --><button type="button" class="helperButton ng-binding ng-scope" ng-disabled="isDisabled" ng-if="helperStatus.none" ng-click="select( 'none', $event );" ng-bind-html="lang.selectNone">×&nbsp;&nbsp;清空</button><!-- end ngIf: helperStatus.none --><!-- ngIf: helperStatus.reset --></div><!-- end ngIf: helperStatus.all || helperStatus.none || helperStatus.reset --><!-- ngIf: helperStatus.filter --><div class="line ng-scope" style="position:relative" ng-if="helperStatus.filter"><input placeholder="查询匹配词" type="text" ng-click="select( 'filter', $event )" ng-model="inputLabel.labelFilter" ng-change="searchChanged()" class="inputFilter ng-pristine ng-untouched ng-valid ng-empty" aria-invalid="false"><button type="button" class="clearButton" ng-click="clearClicked( $event )">×</button> </div><!-- end ngIf: helperStatus.filter --> </div><!-- end ngIf: helperStatus.filter || helperStatus.all || helperStatus.none || helperStatus.reset --> <div class="checkBoxContainer" style="height:200px; overflow-y:scroll;"><!-- ngRepeat: item in filteredModel | filter:removeGroupEndMarker --></div></div></span></isteven-multi-select></div></div><div layout="row" flex="30" flex-offset="5" layout-align="start center" class="form-group form-group-select layout-align-end-start layout-align-start-center layout-row flex-offset-5 flex-30"><label>日志目录</label><div flex="" flex-offset="5" layout="column" class="layout-column flex-offset-5 flex"><isteven-multi-select input-model="inputLogPaths" output-model="logPaths" button-label="logpath" item-label="logpath" tick-property="ticked" helper-elements="all none filter" max-height="200px" translation="multiConfig" max-labels="1" class="ng-isolate-scope"><span class="multiSelect inlineBlock"><button id="" type="button" ng-click="toggleCheckboxes( $event ); refreshSelectedItems(); refreshButton(); prepareGrouping; prepareIndex();" ng-bind-html="varButtonLabel" ng-disabled="disable-button" class="ng-binding">ALL<span class="caret"></span></button><div class="checkboxLayer"><!-- ngIf: helperStatus.filter || helperStatus.all || helperStatus.none || helperStatus.reset --><div class="helperContainer ng-scope" ng-if="helperStatus.filter || helperStatus.all || helperStatus.none || helperStatus.reset "><!-- ngIf: helperStatus.all || helperStatus.none || helperStatus.reset --><div class="line ng-scope" ng-if="helperStatus.all || helperStatus.none || helperStatus.reset "><!-- ngIf: helperStatus.all --><button type="button" class="helperButton ng-binding ng-scope" ng-disabled="isDisabled" ng-if="helperStatus.all" ng-click="select( 'all', $event );" ng-bind-html="lang.selectAll">✓&nbsp;&nbsp;全部选择</button><!-- end ngIf: helperStatus.all --><!-- ngIf: helperStatus.none --><button type="button" class="helperButton ng-binding ng-scope" ng-disabled="isDisabled" ng-if="helperStatus.none" ng-click="select( 'none', $event );" ng-bind-html="lang.selectNone">×&nbsp;&nbsp;清空</button><!-- end ngIf: helperStatus.none --><!-- ngIf: helperStatus.reset --></div><!-- end ngIf: helperStatus.all || helperStatus.none || helperStatus.reset --><!-- ngIf: helperStatus.filter --><div class="line ng-scope" style="position:relative" ng-if="helperStatus.filter"><input placeholder="查询匹配词" type="text" ng-click="select( 'filter', $event )" ng-model="inputLabel.labelFilter" ng-change="searchChanged()" class="inputFilter ng-pristine ng-untouched ng-valid ng-empty" aria-invalid="false"><button type="button" class="clearButton" ng-click="clearClicked( $event )">×</button> </div><!-- end ngIf: helperStatus.filter --> </div><!-- end ngIf: helperStatus.filter || helperStatus.all || helperStatus.none || helperStatus.reset --> <div class="checkBoxContainer" style="height:200px; overflow-y:scroll;"><!-- ngRepeat: item in filteredModel | filter:removeGroupEndMarker --></div></div></span></isteven-multi-select></div></div></div><div layout="row" layout-wrap="" class="form-group form-group-select layout-wrap layout-row"><div layout="row" layout-align="start center" flex="30" class="layout-align-start-center layout-row flex-30"><label>查询时间范围</label><div flex="" flex-offset="5" class="flex-offset-5 flex"><select class="form-control input-sm ng-pristine ng-untouched ng-valid ng-not-empty" data-ng-model="timeRange" aria-invalid="false"><option value="3">3分钟</option><option value="10">10分钟</option><option value="30">30分钟</option><option value="60">1小时</option><option value="1440">1天</option><option value="other">精确时间</option></select></div></div><div data-ng-show="timeRange === 'other'" flex="30" flex-offset="5" class="flex-offset-5 flex-30 ng-hide" aria-hidden="true"><label flex="" class="flex">起始日期 <span class="text-danger">*</span></label><datetimepicker min-date="minDate" hour-step="hourStep" minute-step="minuteStep" ng-model="gte" show-meridian="showMeridian" date-format="yyyy-MM-dd" date-options="dateOptions" readonly-date="false" show-spinners="false" readonly-time="false" current-text="今天" clear-text="清除" close-text="关闭" mousewheel="false" date-disabled="isDisableGteDate(date, mode)" ng-required="timeRange === 'other'" class="ng-pristine ng-untouched ng-isolate-scope ng-empty ng-valid ng-valid-required" aria-required="false" aria-invalid="false"><div class="datetimepicker-wrapper"><input class="form-control ng-pristine ng-untouched ng-valid ng-isolate-scope ng-empty ng-valid-date" type="text" ng-click="open($event)" ng-change="date_change($event)" is-open="opened" ng-model="ngModel" min-date="minDate" datepicker-options="dateOptions" ng-disabled="readonlyDate" date-disabled="dateDisabled({date: date, mode: mode})" uib-datepicker-popup="yyyy-MM-dd" current-text="今天" clear-text="清除" close-text="关闭" placeholder="" aria-invalid="false"><!-- ngIf: isOpen -->
</div>
    <div class="datetimepicker-wrapper ng-pristine ng-untouched ng-valid ng-valid-time ng-not-empty" ng-model="time" ng-change="time_change()" style="display:inline-block" aria-invalid="false">
        <table hour-step="hourStep" minute-step="minuteStep" show-meridian="showMeridian" mousewheel="mousewheel" readonly-input="readonlyTime" show-spinners="false" class="ng-isolate-scope">
            <tbody>
            <tr class="text-center ng-hide" ng-show="::showSpinners" aria-hidden="true">
                <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="0"><span class="glyphicon glyphicon-chevron-up"></span></a></td>
                <td>&nbsp;</td>
                <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="0"><span class="glyphicon glyphicon-chevron-up"></span></a></td>
                <td ng-show="showMeridian" aria-hidden="true" class="ng-hide"></td>
            </tr>
            <tr>
                <td class="form-group" ng-class="{'has-error': invalidHours}">
                    <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-maxlength" ng-readonly="::readonlyInput" maxlength="2" tabindex="0" aria-invalid="false">
                </td>
                <td>:</td>
                <td class="form-group" ng-class="{'has-error': invalidMinutes}">
                    <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-maxlength" ng-readonly="::readonlyInput" maxlength="2" tabindex="0" aria-invalid="false">
                </td>
                <td ng-show="showMeridian" aria-hidden="true" class="ng-hide"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center ng-binding" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="0">AM</button></td>
            </tr>
            <tr class="text-center ng-hide" ng-show="::showSpinners" aria-hidden="true">
                <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="0"><span class="glyphicon glyphicon-chevron-down"></span></a></td>
                <td>&nbsp;</td>
                <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="0"><span class="glyphicon glyphicon-chevron-down"></span></a></td>
                <td ng-show="showMeridian" aria-hidden="true" class="ng-hide"></td>
            </tr>
            </tbody>
        </table></div></datetimepicker></div><div data-ng-show="timeRange === 'other'" flex="30" flex-offset="5" class="flex-offset-5 flex-30 ng-hide" aria-hidden="true"><label flex="" class="flex">截止日期 <span class="text-danger">*</span></label><datetimepicker min-date="minDate" hour-step="hourStep" minute-step="minuteStep" ng-model="lte" show-meridian="showMeridian" date-format="yyyy-MM-dd" date-options="dateOptions" readonly-date="false" show-spinners="false" readonly-time="false" current-text="今天" clear-text="清除" close-text="关闭" mousewheel="false" date-disabled="isDisablelteDate(date, mode)" ng-required="timeRange === 'other'" class="ng-pristine ng-untouched ng-isolate-scope ng-empty ng-valid ng-valid-required" aria-required="false" aria-invalid="false"><div class="datetimepicker-wrapper"><input class="form-control ng-pristine ng-untouched ng-valid ng-isolate-scope ng-empty ng-valid-date" type="text" ng-click="open($event)" ng-change="date_change($event)" is-open="opened" ng-model="ngModel" min-date="minDate" datepicker-options="dateOptions" ng-disabled="readonlyDate" date-disabled="dateDisabled({date: date, mode: mode})" uib-datepicker-popup="yyyy-MM-dd" current-text="今天" clear-text="清除" close-text="关闭" placeholder="" aria-invalid="false"><!-- ngIf: isOpen -->
</div>
    <div class="datetimepicker-wrapper ng-pristine ng-untouched ng-valid ng-valid-time ng-not-empty" ng-model="time" ng-change="time_change()" style="display:inline-block" aria-invalid="false">
        <table hour-step="hourStep" minute-step="minuteStep" show-meridian="showMeridian" mousewheel="mousewheel" readonly-input="readonlyTime" show-spinners="false" class="ng-isolate-scope">
            <tbody>
            <tr class="text-center ng-hide" ng-show="::showSpinners" aria-hidden="true">
                <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="0"><span class="glyphicon glyphicon-chevron-up"></span></a></td>
                <td>&nbsp;</td>
                <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="0"><span class="glyphicon glyphicon-chevron-up"></span></a></td>
                <td ng-show="showMeridian" aria-hidden="true" class="ng-hide"></td>
            </tr>
            <tr>
                <td class="form-group" ng-class="{'has-error': invalidHours}">
                    <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-maxlength" ng-readonly="::readonlyInput" maxlength="2" tabindex="0" aria-invalid="false">
                </td>
                <td>:</td>
                <td class="form-group" ng-class="{'has-error': invalidMinutes}">
                    <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-maxlength" ng-readonly="::readonlyInput" maxlength="2" tabindex="0" aria-invalid="false">
                </td>
                <td ng-show="showMeridian" aria-hidden="true" class="ng-hide"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center ng-binding" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="0">AM</button></td>
            </tr>
            <tr class="text-center ng-hide" ng-show="::showSpinners" aria-hidden="true">
                <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="0"><span class="glyphicon glyphicon-chevron-down"></span></a></td>
                <td>&nbsp;</td>
                <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="0"><span class="glyphicon glyphicon-chevron-down"></span></a></td>
                <td ng-show="showMeridian" aria-hidden="true" class="ng-hide"></td>
            </tr>
            </tbody>
        </table></div></datetimepicker></div><div flex="60" flex-offset="5" class="flex-offset-5 flex-60"><div layout="row" layout-align="start center" class="layout-align-start-center layout-row"><button class="md-button md-raised md-button md-ink-ripple" type="button" ng-transclude="" data-ng-click="getLog()" data-ng-disabled="staticForm.$invalid" aria-label="查询" disabled="disabled"><span class="ng-scope">查询</span></button><a class="md-button md-ink-ripple md-raised" ng-transclude="" target="_blank" ng-disabled="!clusterlogs.logSize" ng-href="" ng-hide="showContextUI" ng-class="{'md-primary': clusterlogs.logSize, 'md-raised': !clusterlogs.logSize}" data-demo-disable="" aria-label="导出日志" href="#" aria-hidden="false" tabindex="-1" disabled="disabled"><span class="ng-scope">导出日志</span></a><a class="md-button md-ink-ripple md-raised ng-hide" ng-transclude="" target="_blank" ng-disabled="!clusterlogs.logSize" ng-href="" ng-show="showContextUI" ng-class="{'md-primary': clusterlogs.logSize, 'md-raised': !clusterlogs.logSize}" data-demo-disable="" aria-label="导出日志" href="#" aria-hidden="true" tabindex="-1" disabled="disabled"><span class="ng-scope">导出日志</span></a><span class="text-warning ng-binding ng-hide" data-ng-show="clusterlogs.logSize &amp;&amp; clusterlogs.logSize > logDownloadToplimit" aria-hidden="true">日志记录过大，只能导出前5000条</span></div></div></div></form><div><div ng-hide="showContextUI" aria-hidden="false" class=""><div class="log-screen"><ul class="list-unstyled ng-isolate-scope" data-infinite-scroll="clusterlogs.getlogs()" data-infinite-scroll-distance="0" data-infinite-scroll-disabled="clusterlogs.isLoadingLogs" data-infinite-scroll-parent="true"><li><!-- ngRepeat: log in clusterlogs.logs --></li></ul><code data-ng-show="clusterlogs.isLoadingLogs" aria-hidden="true" class="ng-hide">数据加载中...</code> <code data-ng-show="clusterlogs.logs.length == 0 &amp;&amp; clusterlogs.isComplete" aria-hidden="true" class="ng-hide">未查询到符合条件的日志</code></div></div><div ng-show="showContextUI" aria-hidden="true" class="ng-hide"><div class="log-screen selected-log-list" id="contextLog"><a href="#" ng-click="returnLos()" class="btn btn-primary btn-sm hide-selected" style="position: absolute;"><span class="glyphicon glyphicon-menu-left"></span></a><ul class="list-unstyled"><!-- ngRepeat: logContext in contextlogs.logs --></ul><code data-ng-show="contextlogs.isLoadingLogs" aria-hidden="true" class="ng-hide">数据加载中...</code></div></div></div></div></section></div></div>
</body>
</html>